ChangeLog:

2005-05-06  John W. Eaton  <jwe@octave.org>

	* octMakefile.in (DISTDIRS): Remove glob from the list.
	(dist): No need to clean up in glob subdirectory.
	* glob: Delete directory.
	* Makeconf.in (GLOB_INCFLAGS, LIBGLOB): Delete.
	(do-subst-config-vals): Don't substitute them.
	(INCFLAGS): Remove $(GLOB_INCFLAGS) from the list.
	* configure.in: Don't test for glob or fnmatch.


src/ChangeLog:

2005-05-06  John W. Eaton  <jwe@octave.org>

	* toplev.cc (octave_config_info): Remove LIBGLOB and GLOB_INCFLAGS
	from the list.
	* oct-conf.h.in (OCTAVE_CONF_LIBGLOB, OCTAVE_CONF_GLOB_INCFLAGS):
	Delete.
	* Makefile.in (OCTAVE_LIBS): Remove $(LIBGLOB) from the list.


Index: Makeconf.in
===================================================================
RCS file: /usr/local/cvsroot/octave/Makeconf.in,v
retrieving revision 1.151.2.1
diff -u -r1.151.2.1 Makeconf.in
--- Makeconf.in	21 Feb 2005 16:49:41 -0000	1.151.2.1
+++ Makeconf.in	6 May 2005 18:52:53 -0000
@@ -91,7 +91,6 @@
 # cc and associated flags.
 
 DLFCN_INCFLAGS = @DLFCN_INCFLAGS@
-GLOB_INCFLAGS = @GLOB_INCFLAGS@
 
 # Clean up INCFLAGS a bit if we are not compiling in a separate
 # directory.
@@ -109,7 +108,7 @@
 	-I$(top_srcdir)/liboctave -I$(top_srcdir)/src \
 	-I$(top_srcdir)/libcruft/misc
 endif
-INCFLAGS = $(TMP_IF_1) $(TMP_IF_2) $(DLFCN_INCFLAGS) $(GLOB_INCFLAGS)
+INCFLAGS = $(TMP_IF_1) $(TMP_IF_2) $(DLFCN_INCFLAGS)
 
 LIBFLAGS = -L$(TOPDIR)
 
@@ -170,7 +169,6 @@
 FLIBS = @FLIBS@
 
 LIBDLFCN = @LIBDLFCN@
-LIBGLOB = @LIBGLOB@
 LIBPLPLOT = @LIBPLPLOT@
 LIBOCTINTERP = @LIBOCTINTERP@
 LIBOCTAVE = @LIBOCTAVE@
@@ -422,7 +420,6 @@
   -e "s;%OCTAVE_CONF_FFTW_LIBS%;\"${FFTW_LIBS}\";" \
   -e "s;%OCTAVE_CONF_FLIBS%;\"${FLIBS}\";" \
   -e "s;%OCTAVE_CONF_FPICFLAG%;\"${FPICFLAG}\";" \
-  -e "s;%OCTAVE_CONF_GLOB_INCFLAGS%;\"${GLOB_INCFLAGS}\";" \
   -e "s;%OCTAVE_CONF_INCFLAGS%;\"${INCFLAGS}\";" \
   -e "s;%OCTAVE_CONF_LD_CXX%;\"${LD_CXX}\";" \
   -e "s;%OCTAVE_CONF_LDFLAGS%;\"${LDFLAGS}\";" \
@@ -434,7 +431,6 @@
   -e "s;%OCTAVE_CONF_LIBDLFCN%;\"${LIBDLFCN}\";" \
   -e "s;%OCTAVE_CONF_LIBEXT%;\"${LIBEXT}\";" \
   -e "s;%OCTAVE_CONF_LIBFLAGS%;\"${LIBFLAGS}\";" \
-  -e "s;%OCTAVE_CONF_LIBGLOB%;\"${LIBGLOB}\";" \
   -e "s;%OCTAVE_CONF_LIBOCTAVE%;\"${LIBOCTAVE}\";" \
   -e "s;%OCTAVE_CONF_LIBOCTINTERP%;\"${LIBOCTINTERP}\";" \
   -e "s;%OCTAVE_CONF_LIBPLPLOT%;\"${LIBPLPLOT}\";" \
Index: configure.in
===================================================================
RCS file: /usr/local/cvsroot/octave/configure.in,v
retrieving revision 1.458.2.7
diff -u -r1.458.2.7 configure.in
--- configure.in	26 Apr 2005 19:43:53 -0000	1.458.2.7
+++ configure.in	6 May 2005 18:52:54 -0000
@@ -920,8 +920,6 @@
 AC_CHECK_HEADERS($TERMIOS_H, have_termios_h=yes)
 AC_CHECK_HEADERS(termio.h, have_termio_h=yes, have_termio_h=no)
 AC_CHECK_HEADERS(sgtty.h, have_sgtty_h=yes, have_sgtty_h=no)
-AC_CHECK_HEADERS(glob.h, have_glob_h=yes, have_glob_h=no)
-AC_CHECK_HEADERS(fnmatch.h, have_fnmatch_h=yes, have_fnmatch_h=no)
 AC_CHECK_HEADERS(conio.h, have_conio_h=yes, have_conio_h=no)
 
 ### I'm told that termios.h is broken on NeXT systems.
@@ -943,42 +941,6 @@
   AC_MSG_WARN([I couldn't find termios.h, termio.h, or sgtty.h!])
 fi
 
-## I'm told that setting LIBGLOB to be $(TOPDIR)/glob/libglob.a causes
-## trouble on SCO systems, but setting it to be the two object files
-## avoids the problem.
-
-GLOB_DIR=glob
-if test -n "$ALLOCA"; then
-  LIBGLOB='$(TOPDIR)/glob/glob.o $(TOPDIR)/glob/fnmatch.o $(TOPDIR)/glob/alloca.o'
-else
-  LIBGLOB='$(TOPDIR)/glob/glob.o $(TOPDIR)/glob/fnmatch.o'
-fi
-GLOB_INCFLAGS='-I$(top_srcdir)/glob -I$(TOPDIR)/glob'
-if test "$have_fnmatch_h" = yes && test "$have_glob_h" = yes; then
-  AC_EGREP_CPP(yes, [#include <fnmatch.h>
-#ifdef FNM_NOESCAPE
-#ifdef FNM_PATHNAME
-#ifdef FNM_PERIOD
-   yes
-#endif
-#endif
-#endif
-    ], [
-      GLOB_DIR=
-      AC_CHECK_LIB(glob, glob)
-      AC_CHECK_FUNCS(fnmatch, have_fnmatch=yes, have_fnmatch=no)
-      AC_CHECK_FUNCS(glob, have_glob=yes, have_glob=no)
-      if test "$have_fnmatch" = yes && test "$have_glob" = yes; then
-	GLOB_DIR=
-	LIBGLOB=
-	GLOB_INCFLAGS=
-      fi
-    ])
-fi
-AC_SUBST(GLOB_DIR)
-AC_SUBST(LIBGLOB)
-AC_SUBST(GLOB_INCFLAGS)
-
 ### Checks for functions and variables.
 
 AC_CHECK_FUNCS(atexit basename bcopy bzero canonicalize_file_name \
@@ -1365,13 +1327,6 @@
 
 AC_CONFIG_SUBDIRS(scripts)
 
-# autoconf 2.50 deprecates the use of variables (e.g. $GLOB_DIR)
-# in AC_CONFIG_SUBDIRS; the following form is recommended instead:
-
-if test "x$GLOB_DIR" = xglob; then
-	AC_CONFIG_SUBDIRS(glob)
-fi
-
 if test "x$PLPLOT_DIR" = xplplot; then
 	AC_CONFIG_SUBDIRS(plplot)
 fi
Index: octMakefile.in
===================================================================
RCS file: /usr/local/cvsroot/octave/octMakefile.in,v
retrieving revision 1.195
diff -u -r1.195 octMakefile.in
--- octMakefile.in	2 Apr 2004 14:54:20 -0000	1.195
+++ octMakefile.in	6 May 2005 18:52:54 -0000
@@ -32,10 +32,10 @@
 	mkoctfile.in texi2dvi ChangeLog ChangeLog.[0-9]
 
 # Complete directory trees to distribute.
-DISTDIRS = glob # plplot
+DISTDIRS = # plplot
 
 # Subdirectories in which to run `make all'.
-SUBDIRS = @PLPLOT_DIR@ @DLFCN_DIR@ @GLOB_DIR@ \
+SUBDIRS = @PLPLOT_DIR@ @DLFCN_DIR@ \
 	libcruft liboctave scripts doc examples
 
 ALL_SUBDIRS = $(SUBDIRS) src
@@ -62,7 +62,7 @@
 BINDISTSUBDIRS = libcruft liboctave src scripts doc emacs examples
 
 # Subdirectories in which to run clean targets.
-CLEANSUBDIRS = $(DISTSUBDIRS) @GLOB_DIR@
+CLEANSUBDIRS = $(DISTSUBDIRS)
 
 DIRS_TO_MAKE = $(bindir) $(libdir) $(octincludedir)/octave $(fcnfiledir) \
   $(octfiledir) $(archlibdir) $(localarchlibdir) $(localverarchlibdir) \
@@ -179,8 +179,6 @@
 	  -o -name config.status -o -name config.cache -o -name stamp-h \
 	  -o -name klibtool.config -o -name stamp-auto \
 	  -o -name c-auto.h \) -print | xargs rm -rf
-	find `cat .fname`/glob -name Makefile | xargs rm -f
-	find `cat .fname`/glob -name config.h | xargs rm -f
 	rm -f `cat .fname`/test/octave.test/*.m
 	chmod -R a+rwX `cat .fname`
 	tar cf `cat .fname`.tar `cat .fname`
Index: src/Makefile.in
===================================================================
RCS file: /usr/local/cvsroot/octave/src/Makefile.in,v
retrieving revision 1.352.2.5
diff -u -r1.352.2.5 Makefile.in
--- src/Makefile.in	2 Mar 2005 01:33:30 -0000	1.352.2.5
+++ src/Makefile.in	6 May 2005 18:53:00 -0000
@@ -213,7 +213,7 @@
 
 OCTAVE_LIBS = $(LIBOCTINTERP) $(LIBOCTAVE) \
   $(SPECIAL_MATH_LIB) $(LIBCRUFT) \
-  $(LIBPLPLOT) $(LIBGLOB) $(LIBDLFCN)
+  $(LIBPLPLOT) $(LIBDLFCN)
 
 OCTINTERP_LINK_DEPS = \
   -L../liboctave $(LIBOCTAVE) -L../libcruft $(LIBCRUFT) $(LIBS) $(FLIBS)
Index: src/oct-conf.h.in
===================================================================
RCS file: /usr/local/cvsroot/octave/src/oct-conf.h.in,v
retrieving revision 1.23.2.1
diff -u -r1.23.2.1 oct-conf.h.in
--- src/oct-conf.h.in	26 Apr 2005 19:43:58 -0000	1.23.2.1
+++ src/oct-conf.h.in	6 May 2005 18:53:00 -0000
@@ -149,10 +149,6 @@
 #define OCTAVE_CONF_FPICFLAG %OCTAVE_CONF_FPICFLAG%
 #endif
 
-#ifndef OCTAVE_CONF_GLOB_INCFLAGS
-#define OCTAVE_CONF_GLOB_INCFLAGS %OCTAVE_CONF_GLOB_INCFLAGS%
-#endif
-
 #ifndef OCTAVE_CONF_INCFLAGS
 #define OCTAVE_CONF_INCFLAGS %OCTAVE_CONF_INCFLAGS%
 #endif
@@ -197,10 +193,6 @@
 #define OCTAVE_CONF_LIBFLAGS %OCTAVE_CONF_LIBFLAGS%
 #endif
 
-#ifndef OCTAVE_CONF_LIBGLOB
-#define OCTAVE_CONF_LIBGLOB %OCTAVE_CONF_LIBGLOB%
-#endif
-
 #ifndef OCTAVE_CONF_LIBOCTAVE
 #define OCTAVE_CONF_LIBOCTAVE %OCTAVE_CONF_LIBOCTAVE%
 #endif
Index: src/toplev.cc
===================================================================
RCS file: /usr/local/cvsroot/octave/src/toplev.cc,v
retrieving revision 1.153.2.4
diff -u -r1.153.2.4 toplev.cc
--- src/toplev.cc	26 Apr 2005 19:44:00 -0000	1.153.2.4
+++ src/toplev.cc	6 May 2005 18:53:00 -0000
@@ -672,7 +672,6 @@
       "FFTW_LIBS", OCTAVE_CONF_FFTW_LIBS,
       "FLIBS", OCTAVE_CONF_FLIBS,
       "FPICFLAG", OCTAVE_CONF_FPICFLAG,
-      "GLOB_INCFLAGS", OCTAVE_CONF_GLOB_INCFLAGS,
       "INCFLAGS", OCTAVE_CONF_INCFLAGS,
       "LDFLAGS", OCTAVE_CONF_LDFLAGS,
       "LD_CXX", OCTAVE_CONF_LD_CXX,
@@ -684,7 +683,6 @@
       "LIBDLFCN", OCTAVE_CONF_LIBDLFCN,
       "LIBEXT", OCTAVE_CONF_LIBEXT,
       "LIBFLAGS", OCTAVE_CONF_LIBFLAGS,
-      "LIBGLOB", OCTAVE_CONF_LIBGLOB,
       "LIBOCTAVE", OCTAVE_CONF_LIBOCTAVE,
       "LIBOCTINTERP", OCTAVE_CONF_LIBOCTINTERP,
       "LIBPLPLOT", OCTAVE_CONF_LIBPLPLOT,
